<UserControl x:Class="ZhApi.WpfApp.LogItems.FileCountControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:ZhApi.WpfApp.LogItems"
             mc:Ignorable="d"
             Foreground="{DynamicResource TextE6}">
    <d:UserControl.DataContext>
        <local:FileCountControlViewModel
            Total="9527"
            Current="100"
            TimeConsuming="1.55"
            ErrorWarn="{x:Static local:ErrorWarnViewModel.Default}"
            />
    </d:UserControl.DataContext>
    <StackPanel Orientation="Horizontal">
        <!-- 文件总数 -->

        <TextBlock Text="文件总数:" Padding="5,0,5,0"/>
        <TextBlock Text="{Binding Total,StringFormat='{}{0:N0}'}"/>
        <TextBlock Text="{Binding Current,StringFormat='/{0:N0}'}"
                   Visibility="{Binding CurrentVisibility}"/>

        <TextBlock Text="{Binding Progress,Mode=OneWay,
                   Converter={StaticResource percentageFormat},
                   StringFormat=' {0}'}"
                   Visibility="{Binding CurrentVisibility}"
                   Foreground="{DynamicResource GreenYellow}"/>

        <TextBlock Text="{Binding TimeConsuming,StringFormat=', 耗时 {0}'}"/>

        <!-- 错误异常重试 -->
        <local:ErrorWarn DataContext="{Binding ErrorWarn}"/>

    </StackPanel>
</UserControl>
